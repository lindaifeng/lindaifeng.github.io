import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,o as a,f as t}from"./app-B4WH2CHP.js";const s={},n=t(`<h2 id="harbor升级方案" tabindex="-1"><a class="header-anchor" href="#harbor升级方案"><span>harbor升级方案</span></a></h2><h3 id="环境检查" tabindex="-1"><a class="header-anchor" href="#环境检查"><span>环境检查</span></a></h3><ol><li><p><strong>harbor安装位置以及镜像存储位置</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>find / -name harbor</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://img.slcp.top/DF5459D11E394FFAC3AF954B335EE05B.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure></li><li><p>版本查看</p><p><strong>1）界面查看</strong></p><blockquote><p>界面版本更为准确！！！</p></blockquote><figure><img src="https://img.slcp.top/D32702B0FD38EF3A2C66575A381989AB.png" alt="D32702B0FD38EF3A2C66575A381989AB" tabindex="0" loading="lazy"><figcaption>D32702B0FD38EF3A2C66575A381989AB</figcaption></figure><figure><img src="https://img.slcp.top/B8E0E1036A32364285C732F71EF18665.jpg" alt="B8E0E1036A32364285C732F71EF18665" tabindex="0" loading="lazy"><figcaption>B8E0E1036A32364285C732F71EF18665</figcaption></figure><p><strong>2）配置查看</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>/_version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://img.slcp.top/3459425649BBD5C5E379085EC8A009EA.png" alt="3459425649BBD5C5E379085EC8A009EA" tabindex="0" loading="lazy"><figcaption>3459425649BBD5C5E379085EC8A009EA</figcaption></figure></li></ol><h3 id="获取最新镜像" tabindex="-1"><a class="header-anchor" href="#获取最新镜像"><span>获取最新镜像</span></a></h3><ol><li><p><strong>查看版本</strong></p><p>官网：https://goharbor.io/</p><figure><img src="http://img.lindaifeng.vip/typora-picgo-tuchaung/20230130170406.png" alt="image-20230129100035153" tabindex="0" loading="lazy"><figcaption>image-20230129100035153</figcaption></figure></li><li><p><strong>下载最新版本</strong></p><p>github项目：https://github.com/goharbor/harbor</p><figure><img src="https://img.slcp.top/image-20230129100318918.png" alt="image-20230129100318918" tabindex="0" loading="lazy"><figcaption>image-20230129100318918</figcaption></figure><figure><img src="https://img.slcp.top/image-20230129100419274.png" alt="image-20230129100419274" tabindex="0" loading="lazy"><figcaption>image-20230129100419274</figcaption></figure></li></ol><h3 id="删除原harbor" tabindex="-1"><a class="header-anchor" href="#删除原harbor"><span>删除原harbor</span></a></h3><blockquote><p>温馨提示：</p><p>​ 2.7.0为版本好，具体位置根据磁盘大小而定！！！</p></blockquote><ol><li><p><strong>备份数据</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /2.7.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /data/2.7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mv harbor /2.7.0/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cp -r /data/* /data/2.7/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>删除镜像</strong></p></li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#在原harbor安装目录下执行(即与docker-compose.yml同级目录)</span></span>
<span class="line"><span>docker-compose down</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装新harbor" tabindex="-1"><a class="header-anchor" href="#安装新harbor"><span>安装新harbor</span></a></h3><ol><li><p><strong>上传</strong></p><blockquote><p>将tar包上传到指定位置</p></blockquote></li><li><p><strong>解压</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>tar -zxvf harbor-offline-installer-v2.7.0.tgz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>编辑yml文件</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cp harbor.yml.tmpl harbor.yml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>修改配置</strong></p><blockquote><p>注释掉htps的配置内容，配置htp相关的参数，主要是<strong>hostname</strong>，<strong>port</strong>，其他都可以不用动。</p></blockquote><blockquote><p>温馨提示：<code>密码</code>和<code>数据存储位置</code>必须修改</p><p>data_volume: /data/2.7（仅供参考！！！）</p></blockquote><figure><img src="https://img.slcp.top/image-20220410115849673.png" alt="image-20220410115849673" tabindex="0" loading="lazy"><figcaption>image-20220410115849673</figcaption></figure></li><li><p><strong>启动</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>./install.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://img.slcp.top/1FFBEB6B89353FFB72B329BCCB56F3B9.png" alt="1FFBEB6B89353FFB72B329BCCB56F3B9" tabindex="0" loading="lazy"><figcaption>1FFBEB6B89353FFB72B329BCCB56F3B9</figcaption></figure></li><li><p><strong>检查</strong></p></li></ol><figure><img src="https://img.slcp.top/B1AC620EC7189F47265243BC1A28E91E.jpg" alt="B1AC620EC7189F47265243BC1A28E91E" tabindex="0" loading="lazy"><figcaption>B1AC620EC7189F47265243BC1A28E91E</figcaption></figure>`,12),r=[n];function l(o,p){return a(),e("div",null,r)}const h=i(s,[["render",l],["__file","harbor版本升级方案.html.vue"]]),c=JSON.parse('{"path":"/middleware/%E5%AE%B9%E5%99%A8%E5%8C%96%E6%8A%80%E6%9C%AF/Harbor%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93/harbor%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E6%96%B9%E6%A1%88.html","title":"harbor版本升级方案","lang":"zh-CN","frontmatter":{"title":"harbor版本升级方案","categories":["Docker"],"tags":["harbor"],"order":1,"description":"harbor升级方案 环境检查 harbor安装位置以及镜像存储位置 imgimg 版本查看 1）界面查看 界面版本更为准确！！！ D32702B0FD38EF3A2C66575A381989ABD32702B0FD38EF3A2C66575A381989AB B8E0E1036A32364285C732F71EF18665B8E0E1036A3236...","head":[["meta",{"property":"og:url","content":"http://blog.lindaifeng.vip/middleware/%E5%AE%B9%E5%99%A8%E5%8C%96%E6%8A%80%E6%9C%AF/Harbor%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93/harbor%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E6%96%B9%E6%A1%88.html"}],["meta",{"property":"og:site_name","content":"文档演示"}],["meta",{"property":"og:title","content":"harbor版本升级方案"}],["meta",{"property":"og:description","content":"harbor升级方案 环境检查 harbor安装位置以及镜像存储位置 imgimg 版本查看 1）界面查看 界面版本更为准确！！！ D32702B0FD38EF3A2C66575A381989ABD32702B0FD38EF3A2C66575A381989AB B8E0E1036A32364285C732F71EF18665B8E0E1036A3236..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img.slcp.top/DF5459D11E394FFAC3AF954B335EE05B.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-06T16:00:34.000Z"}],["meta",{"property":"article:author","content":"清峰"}],["meta",{"property":"article:tag","content":"harbor"}],["meta",{"property":"article:modified_time","content":"2024-10-06T16:00:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"harbor版本升级方案\\",\\"image\\":[\\"https://img.slcp.top/DF5459D11E394FFAC3AF954B335EE05B.png\\",\\"https://img.slcp.top/D32702B0FD38EF3A2C66575A381989AB.png\\",\\"https://img.slcp.top/B8E0E1036A32364285C732F71EF18665.jpg\\",\\"https://img.slcp.top/3459425649BBD5C5E379085EC8A009EA.png\\",\\"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230130170406.png\\",\\"https://img.slcp.top/image-20230129100318918.png\\",\\"https://img.slcp.top/image-20230129100419274.png\\",\\"https://img.slcp.top/image-20220410115849673.png\\",\\"https://img.slcp.top/1FFBEB6B89353FFB72B329BCCB56F3B9.png\\",\\"https://img.slcp.top/B1AC620EC7189F47265243BC1A28E91E.jpg\\"],\\"dateModified\\":\\"2024-10-06T16:00:34.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"清峰\\",\\"url\\":\\"http://blog.lindaifeng.vip/\\"}]}"]]},"headers":[{"level":2,"title":"harbor升级方案","slug":"harbor升级方案","link":"#harbor升级方案","children":[{"level":3,"title":"环境检查","slug":"环境检查","link":"#环境检查","children":[]},{"level":3,"title":"获取最新镜像","slug":"获取最新镜像","link":"#获取最新镜像","children":[]},{"level":3,"title":"删除原harbor","slug":"删除原harbor","link":"#删除原harbor","children":[]},{"level":3,"title":"安装新harbor","slug":"安装新harbor","link":"#安装新harbor","children":[]}]}],"git":{"createdTime":1726027079000,"updatedTime":1728230434000,"contributors":[{"name":"ldf","email":"1305366530@qq.com","commits":1},{"name":"lindaifeng","email":"1305366530@qq.com","commits":1}]},"readingTime":{"minutes":0.99,"words":298},"filePathRelative":"middleware/容器化技术/Harbor镜像仓库/harbor版本升级方案.md","localizedDate":"2024年9月11日","autoDesc":true,"excerpt":"<h2>harbor升级方案</h2>\\n<h3>环境检查</h3>\\n<ol>\\n<li>\\n<p><strong>harbor安装位置以及镜像存储位置</strong></p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>find / -name harbor</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div><figure><img src=\\"https://img.slcp.top/DF5459D11E394FFAC3AF954B335EE05B.png\\" alt=\\"img\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>img</figcaption></figure>\\n</li>\\n<li>\\n<p>版本查看</p>\\n<p><strong>1）界面查看</strong></p>\\n<blockquote>\\n<p>界面版本更为准确！！！</p>\\n</blockquote>\\n<figure><img src=\\"https://img.slcp.top/D32702B0FD38EF3A2C66575A381989AB.png\\" alt=\\"D32702B0FD38EF3A2C66575A381989AB\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>D32702B0FD38EF3A2C66575A381989AB</figcaption></figure>\\n<figure><img src=\\"https://img.slcp.top/B8E0E1036A32364285C732F71EF18665.jpg\\" alt=\\"B8E0E1036A32364285C732F71EF18665\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>B8E0E1036A32364285C732F71EF18665</figcaption></figure>\\n<p><strong>2）配置查看</strong></p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>/_version</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div><figure><img src=\\"https://img.slcp.top/3459425649BBD5C5E379085EC8A009EA.png\\" alt=\\"3459425649BBD5C5E379085EC8A009EA\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>3459425649BBD5C5E379085EC8A009EA</figcaption></figure>\\n</li>\\n</ol>"}');export{h as comp,c as data};
