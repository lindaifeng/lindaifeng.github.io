import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as e,f as a}from"./app-CZ-mCzec.js";const i={},l=a(`<h1 id="nginx配置访问密码-在线-离线安装" tabindex="-1"><a class="header-anchor" href="#nginx配置访问密码-在线-离线安装"><span>Nginx配置访问密码(在线｜离线安装)</span></a></h1><blockquote><p>实现效果：</p><p>1、通过nignx访问的站点或目录，需要让用户输入用户名密码才能访问</p><p>2、在nginx下，提供了ngx_http_auth_basic_module模块实现让用户只有输入正常的用户名密码才允许访问web内容。默认情况下， nginx已经安装了该模块，所以整体的一个过程就是先用第三方工具设置用户名、密码（其中密码已经加过密）让后保存到文件中， 接着在nginx配置文件中根据之前事先保存的文件开启访问验证：</p></blockquote><blockquote><p>对网站通过密码进行访问 有两种方法</p><p>一种是 通过 htpasswd</p><p>一种是 通过 openssl</p><p>「nginx密码访问所需离线包」https://www.aliyundrive.com/s/1aJ3dAZ3JiB 提取码: q3u8 点击链接保存，或者复制本段内容，打开「阿里云盘」APP</p></blockquote><h2 id="以htpasswd为例" tabindex="-1"><a class="header-anchor" href="#以htpasswd为例"><span>以htpasswd为例：</span></a></h2><p>httpd-tools-2.4.6-88.el7.centos.x86_64.rpm</p><h3 id="一、安装生成密码工具" tabindex="-1"><a class="header-anchor" href="#一、安装生成密码工具"><span>一、安装生成密码工具</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>在线安装</span></span>
<span class="line"><span>安装htpasswd工具：</span></span>
<span class="line"><span>(yum安装)：</span></span>
<span class="line"><span>yum -y install httpd-tools</span></span>
<span class="line"><span></span></span>
<span class="line"><span>离线安装</span></span>
<span class="line"><span>rpm -ivh httpd-tools-2.4.6-88.el7.centos.x86_64.rpm</span></span>
<span class="line"><span>依赖于：</span></span>
<span class="line"><span>apr-1.4.8-7.el7.x86_64.rpm</span></span>
<span class="line"><span>apr-util-1.5.2-6.el7.x86_64.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二、生成密码文件" tabindex="-1"><a class="header-anchor" href="#二、生成密码文件"><span>二、生成密码文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>设置用户名和密码，并把用户名和密码保存到指定文件中：</span></span>
<span class="line"><span>htpasswd -c 密码文件保存路径 用户名</span></span>
<span class="line"><span>htpasswd -c /etc/nginx/conf.d/passwd.db hbhs</span></span>
<span class="line"><span>若该命令成功则会让其输入两遍密码。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三、查看密码文件" tabindex="-1"><a class="header-anchor" href="#三、查看密码文件"><span>三、查看密码文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cat /etc/nginx/conf.d/passwd.db</span></span>
<span class="line"><span>显示hbhs:$apr1$/ToVEbrO$vejTUiS6UTDVIVGZBMDhJ/</span></span>
<span class="line"><span>其中hbhs是用户名，分号后面就是密码（密码已经加过密）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四、修改配置文件拦截站点或请求" tabindex="-1"><a class="header-anchor" href="#四、修改配置文件拦截站点或请求"><span>四、修改配置文件拦截站点或请求</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>找到nginx配置文件所在位置文件中server中location添加：</span></span>
<span class="line"><span>密码提示语｜密码文件路径</span></span>
<span class="line"><span>auth_basic &quot;Username and Password are required&quot;;</span></span>
<span class="line"><span>auth_basic_user_file /etc/nginx/conf.d/passwd.db;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>需要对server限制访问也可加在server模块</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="五、重启nginx并验证是否访问受限" tabindex="-1"><a class="header-anchor" href="#五、重启nginx并验证是否访问受限"><span>五、重启nginx并验证是否访问受限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>验证配置文件是否正确</span></span>
<span class="line"><span>nginx -t</span></span>
<span class="line"><span>重启服务</span></span>
<span class="line"><span>nginx -s reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="以openssl为例" tabindex="-1"><a class="header-anchor" href="#以openssl为例"><span>以openssl为例：</span></a></h2><p>nginx服务器上一般自带了 openssl</p><h3 id="一、新建-passwd文件" tabindex="-1"><a class="header-anchor" href="#一、新建-passwd文件"><span>一、新建 passwd文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>在nignx的conf目录,通过以下命令新建 passwd密码文件</span></span>
<span class="line"><span>用户名为 test，密码为 abcd123456</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo -n &quot;test:&quot; &gt; passwd</span></span>
<span class="line"><span>openssl passwd abcd123456 &gt;&gt; passwd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二、修改nginx配置文件" tabindex="-1"><a class="header-anchor" href="#二、修改nginx配置文件"><span>二、修改nginx配置文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>找到nginx配置文件所在位置文件中server中location添加：</span></span>
<span class="line"><span>密码提示语｜密码文件路径</span></span>
<span class="line"><span>auth_basic &quot;Username and Password are required&quot;;</span></span>
<span class="line"><span>auth_basic_user_file /nginx-1.12.2/conf/passwd;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>需要对server限制访问也可加在server模块</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三、重启nginx并验证是否访问受限" tabindex="-1"><a class="header-anchor" href="#三、重启nginx并验证是否访问受限"><span>三、重启nginx并验证是否访问受限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>验证配置文件是否正确</span></span>
<span class="line"><span>nginx -t</span></span>
<span class="line"><span>重启服务</span></span>
<span class="line"><span>nginx -s reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,23),t=[l];function p(d,r){return e(),s("div",null,t)}const o=n(i,[["render",p],["__file","Nginx配置访问密码.html.vue"]]),g=JSON.parse('{"path":"/middleware/Nginx%E6%8A%80%E6%9C%AF/Nginx%E9%85%8D%E7%BD%AE%E8%AE%BF%E9%97%AE%E5%AF%86%E7%A0%81.html","title":"Nginx配置访问密码","lang":"zh-CN","frontmatter":{"title":"Nginx配置访问密码","categories":["Nginx"],"tags":["https"],"description":"Nginx配置访问密码(在线｜离线安装) 实现效果： 1、通过nignx访问的站点或目录，需要让用户输入用户名密码才能访问 2、在nginx下，提供了ngx_http_auth_basic_module模块实现让用户只有输入正常的用户名密码才允许访问web内容。默认情况下， nginx已经安装了该模块，所以整体的一个过程就是先用第三方工具设置用户名、密...","head":[["meta",{"property":"og:url","content":"http://blog.lindaifeng.vip/middleware/Nginx%E6%8A%80%E6%9C%AF/Nginx%E9%85%8D%E7%BD%AE%E8%AE%BF%E9%97%AE%E5%AF%86%E7%A0%81.html"}],["meta",{"property":"og:site_name","content":"文档演示"}],["meta",{"property":"og:title","content":"Nginx配置访问密码"}],["meta",{"property":"og:description","content":"Nginx配置访问密码(在线｜离线安装) 实现效果： 1、通过nignx访问的站点或目录，需要让用户输入用户名密码才能访问 2、在nginx下，提供了ngx_http_auth_basic_module模块实现让用户只有输入正常的用户名密码才允许访问web内容。默认情况下， nginx已经安装了该模块，所以整体的一个过程就是先用第三方工具设置用户名、密..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-22T02:23:17.000Z"}],["meta",{"property":"article:author","content":"清峰"}],["meta",{"property":"article:tag","content":"https"}],["meta",{"property":"article:modified_time","content":"2024-10-22T02:23:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx配置访问密码\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-22T02:23:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"清峰\\",\\"url\\":\\"http://blog.lindaifeng.vip/\\"}]}"]]},"headers":[{"level":2,"title":"以htpasswd为例：","slug":"以htpasswd为例","link":"#以htpasswd为例","children":[{"level":3,"title":"一、安装生成密码工具","slug":"一、安装生成密码工具","link":"#一、安装生成密码工具","children":[]},{"level":3,"title":"二、生成密码文件","slug":"二、生成密码文件","link":"#二、生成密码文件","children":[]},{"level":3,"title":"三、查看密码文件","slug":"三、查看密码文件","link":"#三、查看密码文件","children":[]},{"level":3,"title":"四、修改配置文件拦截站点或请求","slug":"四、修改配置文件拦截站点或请求","link":"#四、修改配置文件拦截站点或请求","children":[]},{"level":3,"title":"五、重启nginx并验证是否访问受限","slug":"五、重启nginx并验证是否访问受限","link":"#五、重启nginx并验证是否访问受限","children":[]}]},{"level":2,"title":"以openssl为例：","slug":"以openssl为例","link":"#以openssl为例","children":[{"level":3,"title":"一、新建 passwd文件","slug":"一、新建-passwd文件","link":"#一、新建-passwd文件","children":[]},{"level":3,"title":"二、修改nginx配置文件","slug":"二、修改nginx配置文件","link":"#二、修改nginx配置文件","children":[]},{"level":3,"title":"三、重启nginx并验证是否访问受限","slug":"三、重启nginx并验证是否访问受限","link":"#三、重启nginx并验证是否访问受限","children":[]}]}],"git":{"createdTime":1726027079000,"updatedTime":1729563797000,"contributors":[{"name":"ldf","email":"1305366530@qq.com","commits":2}]},"readingTime":{"minutes":2.15,"words":644},"filePathRelative":"middleware/Nginx技术/Nginx配置访问密码.md","localizedDate":"2024年9月11日","autoDesc":true,"excerpt":"\\n<blockquote>\\n<p>实现效果：</p>\\n<p>1、通过nignx访问的站点或目录，需要让用户输入用户名密码才能访问</p>\\n<p>2、在nginx下，提供了ngx_http_auth_basic_module模块实现让用户只有输入正常的用户名密码才允许访问web内容。默认情况下，\\nnginx已经安装了该模块，所以整体的一个过程就是先用第三方工具设置用户名、密码（其中密码已经加过密）让后保存到文件中，\\n接着在nginx配置文件中根据之前事先保存的文件开启访问验证：</p>\\n</blockquote>\\n<blockquote>\\n<p>对网站通过密码进行访问 有两种方法</p>\\n<p>一种是 通过 htpasswd</p>\\n<p>一种是 通过 openssl</p>\\n<p>「nginx密码访问所需离线包」https://www.aliyundrive.com/s/1aJ3dAZ3JiB 提取码: q3u8 点击链接保存，或者复制本段内容，打开「阿里云盘」APP</p>\\n</blockquote>"}');export{o as comp,g as data};
