import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,o as a,f as i}from"./app-B4WH2CHP.js";const e={},l=i(`<h2 id="mysql-双主从-已测试" tabindex="-1"><a class="header-anchor" href="#mysql-双主从-已测试"><span>Mysql 双主从(已测试)</span></a></h2><p><strong>前提：两个数据库数据一致，没有服务在做写入操作。</strong></p><h3 id="一、添加配置文件" tabindex="-1"><a class="header-anchor" href="#一、添加配置文件"><span>一、添加配置文件</span></a></h3><p>master1和master2二台服务器，分别到/etc/my.cnf配置文件， 在mysqld里添加一下属性</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[mysqld]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server-id=101</span></span>
<span class="line"><span></span></span>
<span class="line"><span>log-bin = mysql-bin</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-increment-increment = 2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-increment-offset = 1000</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#master2上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[mysqld]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server-id=103</span></span>
<span class="line"><span></span></span>
<span class="line"><span>log-bin = mysql-bin</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-increment-increment = 2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-increment-offset = 1001</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二、创建用户" tabindex="-1"><a class="header-anchor" href="#二、创建用户"><span>二、创建用户</span></a></h3><p>进入Mysql，分别为二台master创建各种的用户供对方使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1的机器上</span></span>
<span class="line"><span>mysql&gt; CREATE USER &#39;master1&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#master2的机器上</span></span>
<span class="line"><span>mysql&gt; CREATE USER &#39;master2&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>(1819错误密码长度限制问题：set global validate_password_policy=0;)</strong></p><h3 id="三、分别给用户授予复制权限" tabindex="-1"><a class="header-anchor" href="#三、分别给用户授予复制权限"><span>三、分别给用户授予复制权限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1的机器上</span></span>
<span class="line"><span>mysql&gt; GRANT REPLICATION SLAVE  ON *.* TO &#39;master1&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>刷新</span></span>
<span class="line"><span>Mysql&gt;flush privileges;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#master2的机器上</span></span>
<span class="line"><span>mysql&gt; GRANT REPLICATION SLAVE  ON *.* TO &#39;master2&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>刷新</span></span>
<span class="line"><span>Mysql&gt;flush privileges;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四、分别重启服务" tabindex="-1"><a class="header-anchor" href="#四、分别重启服务"><span>四、分别重启服务</span></a></h3><p>登录mysql用户，通过show master status; 查看二进制文件名称还有pos位置，为slave配置复制位置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>service mysqld restart;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090436.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="五、配置主从机" tabindex="-1"><a class="header-anchor" href="#五、配置主从机"><span>五、配置主从机</span></a></h3><p>分别切换master，注意master_log_file还有master_log_pos mysql里面操作</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1的机器上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql&gt; change master to master_host=&#39;192.168.137.103&#39;,master_user=&#39;master2&#39;,master_password=&#39;123456&#39;,master_log_file=&#39;mysql-bin.000003&#39;,master_log_pos=951;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#master2的机器上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql&gt; change master to master_host=&#39;192.168.137.101&#39;,master_user=&#39;master1&#39;,master_password=&#39;123456&#39;,master_log_file=&#39;mysql-bin.000004&#39;,master_log_pos=698;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="七、分别利用命令启动slave" tabindex="-1"><a class="header-anchor" href="#七、分别利用命令启动slave"><span>七、分别利用命令启动slave</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mysql&gt; 	start slave;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>关闭slave</span></span>
<span class="line"><span>stop slave</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="八、测试结果" tabindex="-1"><a class="header-anchor" href="#八、测试结果"><span>八、测试结果</span></a></h3><p>在master1上创建数据库，master2是否能同步，然后再在master2上创建表写数据，看master1能否同步。</p><figure><img src="http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090454.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="mysql-单主从-步骤有问题" tabindex="-1"><a class="header-anchor" href="#mysql-单主从-步骤有问题"><span>Mysql 单主从（步骤有问题）</span></a></h2><h3 id="一、添加配置文件-1" tabindex="-1"><a class="header-anchor" href="#一、添加配置文件-1"><span><strong>一、添加配置文件</strong></span></a></h3><p>master1和master2二台服务器，修改master1/etc/my.cnf配置文件， 在mysqld里添加一下属性</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[mysqld]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server-id=101</span></span>
<span class="line"><span></span></span>
<span class="line"><span>log-bin = mysql-bin</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-increment-increment = 2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-increment-offset = 1000</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二、创建用户-1" tabindex="-1"><a class="header-anchor" href="#二、创建用户-1"><span>二、创建用户</span></a></h3><p>进入Mysql，创建用户供从库使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1的机器上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql&gt; CREATE USER &#39;master1&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三、分别给用户授予复制权限-1" tabindex="-1"><a class="header-anchor" href="#三、分别给用户授予复制权限-1"><span>三、分别给用户授予复制权限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master1的机器上</span></span>
<span class="line"><span>mysql&gt; GRANT REPLICATION SLAVE  ON *.* TO &#39;master1&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>刷新</span></span>
<span class="line"><span>Mysql&gt;flush privileges;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四、分别重启服务-1" tabindex="-1"><a class="header-anchor" href="#四、分别重启服务-1"><span>四、分别重启服务</span></a></h3><p>登录mysql用户，通过show master status 查看二进制文件名称还有pos位置，为slave配置复制位置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>service mysqld restart;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>show master status;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090635.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="五、配置从机" tabindex="-1"><a class="header-anchor" href="#五、配置从机"><span>五、配置从机</span></a></h3><p>切换master，注意master_log_file还有master_log_pos mysql里面操作</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#master2的机器上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql&gt; change master to master_host=&#39;192.168.232.54&#39;,master_user=&#39;master1&#39;,master_password=&#39;HNS@gtjy1.0&#39;,master_log_file=&#39;mysql-bin.000022&#39;,master_log_pos=154;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="七、利用命令启动slave" tabindex="-1"><a class="header-anchor" href="#七、利用命令启动slave"><span>七、利用命令启动slave</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mysql&gt; start slave;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>//关闭slave</span></span>
<span class="line"><span>stop slave;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="八、测试结果-1" tabindex="-1"><a class="header-anchor" href="#八、测试结果-1"><span>八、测试结果</span></a></h3><p>在master1上创建数据库，master2是否能同步。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>查看slave状态：</span></span>
<span class="line"><span>show slave status；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090806.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>安装完成之后，所有mysql重启就可以了</p><p><em><strong>如果是Slave_SQL_Running：no</strong></em></p><figure><img src="http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090816.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><em><strong>*解决办法如下：*</strong></em></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>MariaDB [(none)]&gt; stop slave; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>MariaDB [(none)]&gt; SET GLOBAL SQL_SLAVE_SKIP_COUNTER=1;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>START SLAVE; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>MariaDB [(none)]&gt; start slave; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>MariaDB [(none)]&gt; show slave status;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>show slave status\\G;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="如果出现slave-io-running-no的机器上操作" tabindex="-1"><a class="header-anchor" href="#如果出现slave-io-running-no的机器上操作"><span><em><strong>如果出现Slave_IO_Running: No的机器上操作：</strong></em></span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>MariaDB [(none)]&gt; stop slave; </span></span>
<span class="line"><span>MariaDB [(none)]&gt; CHANGE MASTER TO MASTER_LOG_FILE=&#39;mysql-bin.000026&#39;,MASTER_LOG_POS=0; MariaDB [(none)]&gt; slave start; </span></span>
<span class="line"><span>MariaDB [(none)]&gt; show slave status；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>删除savlue</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>stop slave; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>Query OK, 0 rows affected (0.06 sec)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>reset slave;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>删除5张表，并重新导入脚本</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>use mysql</span></span>
<span class="line"><span></span></span>
<span class="line"><span>drop table slave_master_info;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>drop table slave_relay_log_info;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>drop table slave_worker_info;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>drop table innodb_index_stats;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>drop table innodb_table_stats;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>source /usr/coolpad/mysql/share/mysql_system_tables.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(2)重新启动数据库</p><p>注：这一步是必须的，否则无法正常配置双主架构。</p><p>特别注意，数据库主从日志很大</p><p>(一般位置为/var/lib//mysql/或/usr/local/mysql/var/）</p><p>&lt;2&gt;设置只保留30天的binlog</p><p>(临时，重启mysql这个参数会失败)</p><p>set global expire_logs_days = 30;</p><p>(永久，my.cnf中添加，重启后生效)、</p><p>expire_logs_days = 30</p><p>查看当前的日志保存天数</p><p>show variables like ‘expire_logs_days’;</p><p>数据库重启后，mysql主动配置也需要重启。</p>`,68),p=[l];function d(t,r){return a(),n("div",null,p)}const m=s(e,[["render",d],["__file","Linux安装mysql主从模式.html.vue"]]),h=JSON.parse('{"path":"/database/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/Linux%E5%AE%89%E8%A3%85mysql%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8F.html","title":"Linux安装mysql主从模式","lang":"zh-CN","frontmatter":{"title":"Linux安装mysql主从模式","order":1,"description":"Mysql 双主从(已测试) 前提：两个数据库数据一致，没有服务在做写入操作。 一、添加配置文件 master1和master2二台服务器，分别到/etc/my.cnf配置文件， 在mysqld里添加一下属性 二、创建用户 进入Mysql，分别为二台master创建各种的用户供对方使用 (1819错误密码长度限制问题：set global valida...","head":[["meta",{"property":"og:url","content":"http://blog.lindaifeng.vip/database/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/Linux%E5%AE%89%E8%A3%85mysql%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8F.html"}],["meta",{"property":"og:site_name","content":"文档演示"}],["meta",{"property":"og:title","content":"Linux安装mysql主从模式"}],["meta",{"property":"og:description","content":"Mysql 双主从(已测试) 前提：两个数据库数据一致，没有服务在做写入操作。 一、添加配置文件 master1和master2二台服务器，分别到/etc/my.cnf配置文件， 在mysqld里添加一下属性 二、创建用户 进入Mysql，分别为二台master创建各种的用户供对方使用 (1819错误密码长度限制问题：set global valida..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090436.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-11T03:57:59.000Z"}],["meta",{"property":"article:author","content":"清峰"}],["meta",{"property":"article:modified_time","content":"2024-09-11T03:57:59.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Linux安装mysql主从模式\\",\\"image\\":[\\"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090436.png\\",\\"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090454.jpg\\",\\"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090635.png\\",\\"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090806.jpg\\",\\"http://img.lindaifeng.vip/typora-picgo-tuchaung/20230504090816.jpg\\"],\\"dateModified\\":\\"2024-09-11T03:57:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"清峰\\",\\"url\\":\\"http://blog.lindaifeng.vip/\\"}]}"]]},"headers":[{"level":2,"title":"Mysql 双主从(已测试)","slug":"mysql-双主从-已测试","link":"#mysql-双主从-已测试","children":[{"level":3,"title":"一、添加配置文件","slug":"一、添加配置文件","link":"#一、添加配置文件","children":[]},{"level":3,"title":"二、创建用户","slug":"二、创建用户","link":"#二、创建用户","children":[]},{"level":3,"title":"三、分别给用户授予复制权限","slug":"三、分别给用户授予复制权限","link":"#三、分别给用户授予复制权限","children":[]},{"level":3,"title":"四、分别重启服务","slug":"四、分别重启服务","link":"#四、分别重启服务","children":[]},{"level":3,"title":"五、配置主从机","slug":"五、配置主从机","link":"#五、配置主从机","children":[]},{"level":3,"title":"七、分别利用命令启动slave","slug":"七、分别利用命令启动slave","link":"#七、分别利用命令启动slave","children":[]},{"level":3,"title":"八、测试结果","slug":"八、测试结果","link":"#八、测试结果","children":[]}]},{"level":2,"title":"Mysql 单主从（步骤有问题）","slug":"mysql-单主从-步骤有问题","link":"#mysql-单主从-步骤有问题","children":[{"level":3,"title":"一、添加配置文件","slug":"一、添加配置文件-1","link":"#一、添加配置文件-1","children":[]},{"level":3,"title":"二、创建用户","slug":"二、创建用户-1","link":"#二、创建用户-1","children":[]},{"level":3,"title":"三、分别给用户授予复制权限","slug":"三、分别给用户授予复制权限-1","link":"#三、分别给用户授予复制权限-1","children":[]},{"level":3,"title":"四、分别重启服务","slug":"四、分别重启服务-1","link":"#四、分别重启服务-1","children":[]},{"level":3,"title":"五、配置从机","slug":"五、配置从机","link":"#五、配置从机","children":[]},{"level":3,"title":"七、利用命令启动slave","slug":"七、利用命令启动slave","link":"#七、利用命令启动slave","children":[]},{"level":3,"title":"八、测试结果","slug":"八、测试结果-1","link":"#八、测试结果-1","children":[]}]},{"level":2,"title":"如果出现Slave_IO_Running: No的机器上操作：","slug":"如果出现slave-io-running-no的机器上操作","link":"#如果出现slave-io-running-no的机器上操作","children":[]}],"git":{"createdTime":1726027079000,"updatedTime":1726027079000,"contributors":[{"name":"ldf","email":"1305366530@qq.com","commits":1}]},"readingTime":{"minutes":3.05,"words":914},"filePathRelative":"database/Mysql数据库/Linux安装mysql主从模式.md","localizedDate":"2024年9月11日","autoDesc":true,"excerpt":"<h2>Mysql 双主从(已测试)</h2>\\n<p><strong>前提：两个数据库数据一致，没有服务在做写入操作。</strong></p>\\n<h3>一、添加配置文件</h3>\\n<p>master1和master2二台服务器，分别到/etc/my.cnf配置文件， 在mysqld里添加一下属性</p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>#master1上</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>[mysqld]</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>server-id=101</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>log-bin = mysql-bin</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>auto-increment-increment = 2</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>auto-increment-offset = 1000</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>#master2上</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>[mysqld]</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>server-id=103</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>log-bin = mysql-bin</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>auto-increment-increment = 2</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>auto-increment-offset = 1001</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{m as comp,h as data};
